import { useEffect, useState } from 'react';
import '../styles/Nav.css';

export function Nav() {
    const [showSideBar, setShowSideBar] = useState<boolean>(false);
    function handelShowSideBar() {
        console.log("clicked");
        setShowSideBar((p)=>!p)
    }

    useEffect(() => {
        const myObserver = new ResizeObserver(entries => {
            entries.forEach(entry => {
                // console.log('width', entry.contentRect.width);
                if (entry.contentRect.width < 650) {
                    setShowSideBar(true)
                } else {
                    setShowSideBar(false)
                }
            });
        });
        
        const body = document.body;
        myObserver.observe(body)


        return (() => {
            myObserver.disconnect()
        })

    }, [])
    

    return (
        <>
            <nav>
                <a href="">
                    <div className="logo">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7.10002 20C6.81896 18.9109 6.67342 17.7914 6.66669 16.6667C6.67342 15.542 6.81896 14.4224 7.10002 13.3333H12.7334C12.5901 14.4389 12.5122 15.5519 12.5 16.6667C12.5122 17.7814 12.5901 18.8944 12.7334 20H16.1C15.9368 18.8961 15.8477 17.7825 15.8334 16.6667C15.8477 15.5508 15.9368 14.4372 16.1 13.3333H23.9C24.0632 14.4372 24.1523 15.5508 24.1667 16.6667C24.1523 17.7825 24.0632 18.8961 23.9 20H27.2667C27.41 18.8944 27.4879 17.7814 27.5 16.6667C27.4879 15.5519 27.41 14.4389 27.2667 13.3333H32.9C33.1811 14.4224 33.3266 15.542 33.3334 16.6667C33.3266 17.7914 33.1811 18.9109 32.9 20H36.3317C36.8239 17.5792 36.7718 15.0792 36.1792 12.681C35.5865 10.2828 34.4682 8.04629 32.9051 6.13336C31.3419 4.22044 29.3731 2.67891 27.1411 1.62034C24.909 0.561761 22.4695 0.0126038 19.9992 0.0126038C17.5288 0.0126038 15.0894 0.561761 12.8573 1.62034C10.6253 2.67891 8.65644 4.22044 7.09331 6.13336C5.53018 8.04629 4.41184 10.2828 3.81921 12.681C3.22658 15.0792 3.17448 17.5792 3.66669 20H7.10002ZM31.5334 10H26.6167C26.0943 7.93601 25.3219 5.9435 24.3167 4.06666C27.3569 5.11333 29.9186 7.21954 31.5334 10ZM20 3.4C21.3997 5.42001 22.4739 7.64708 23.1834 10H16.8167C17.5262 7.64708 18.6003 5.42001 20 3.4ZM15.6834 4.06666C14.6782 5.9435 13.9058 7.93601 13.3834 10H8.46669C10.0779 7.21658 12.6409 5.10935 15.6834 4.06666ZM21.2484 29.1583H24.5817V30.825H21.2484V29.1583Z" fill="#6366F1" />
                            <path d="M34.9966 23.3333H5.00329C4.56499 23.3329 4.13091 23.4189 3.72589 23.5864C3.32087 23.754 2.95286 23.9997 2.64294 24.3096C2.33301 24.6196 2.08725 24.9876 1.91972 25.3926C1.7522 25.7976 1.66619 26.2317 1.66663 26.67V36.6633C1.66619 37.1016 1.7522 37.5357 1.91972 37.9407C2.08725 38.3458 2.33301 38.7138 2.64294 39.0237C2.95286 39.3336 3.32087 39.5794 3.72589 39.7469C4.13091 39.9144 4.56499 40.0004 5.00329 40H34.9966C35.4349 40.0004 35.869 39.9144 36.274 39.7469C36.6791 39.5794 37.0471 39.3336 37.357 39.0237C37.6669 38.7138 37.9127 38.3458 38.0802 37.9407C38.2477 37.5357 38.3337 37.1016 38.3333 36.6633V26.67C38.3337 26.2317 38.2477 25.7976 38.0802 25.3926C37.9127 24.9876 37.6669 24.6196 37.357 24.3096C37.0471 23.9997 36.6791 23.754 36.274 23.5864C35.869 23.4189 35.4349 23.3329 34.9966 23.3333ZM15.4183 36.675H12.9183V26.675H15.4183V36.675ZM27.0816 30.825C27.0877 31.155 27.0272 31.4828 26.9038 31.7889C26.7803 32.095 26.5964 32.373 26.363 32.6064C26.1296 32.8397 25.8516 33.0237 25.5455 33.1471C25.2394 33.2706 24.9116 33.3311 24.5816 33.325H21.2483V36.6583H18.7483V26.6583H24.5816C24.9116 26.6522 25.2394 26.7127 25.5455 26.8362C25.8516 26.9597 26.1296 27.1436 26.363 27.377C26.5964 27.6103 26.7803 27.8884 26.9038 28.1944C27.0272 28.5005 27.0877 28.8283 27.0816 29.1583V30.825Z" fill="#6366F1" />
                        </svg>
                        <span id='ipWho'>IPWHO</span>
                    </div>
                </a>

                <div
                    onClick={handelShowSideBar}
                    className={`menuIcon${showSideBar ? "":" hide"}`}
                >
                    <svg xmlns="http://www.w3.org/2000/svg" height="35px" viewBox="0 -960 960 960" width="35px" fill="#111827"><path d="M120-240v-66.67h720V-240H120Zm0-206.67v-66.66h720v66.66H120Zm0-206.66V-720h720v66.67H120Z" /></svg>
                </div>
                <ul
                    className={`nav-items${showSideBar ? " showNav" : ""}`}
                >
                        <li><a href="/docs">Documentation</a></li>
                        <li><a href="">Github</a></li>
                        <li><a href="">Login</a></li>
                        <li><a href="">Sign Up</a></li>
                    </ul>
            </nav>
        </>
    );
}
